<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This flag may only be used in combination with `DUPSORT`. This option tells the library that the data items for this database are all the same size, which allows further optimizations in storage and retrieval. When all data items are the same size, the `get_multiple` and `next_multiple` cursor operations may be used to retrieve multiple items at once."><meta name="keywords" content="rust, rustlang, rust-lang, DUPFIXED"><title>DUPFIXED in lmdb_zero::db - Rust</title><link rel="stylesheet" type="text/css" href="../../normalize.css"><link rel="stylesheet" type="text/css" href="../../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../../ayu.css" disabled ><script id="default-settings" ></script><script src="../../storage.js"></script><script src="../../crates.js"></script><noscript><link rel="stylesheet" href="../../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../../favicon.svg"><style type="text/css">#crate-search{background-image:url("../../down-arrow.svg");}</style></head><body class="rustdoc constant"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../../lmdb_zero/index.html'><div class='logo-container rust-logo'><img src='../../rust-logo.png' alt='logo'></div></a><div class="sidebar-elems"><h2 class="location">Other items in<br><a href="../index.html">lmdb_zero</a>::<wbr><a href="index.html">db</a></h2><div id="sidebar-vars" data-name="DUPFIXED" data-ty="constant" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu" title="themes"><img width="18" height="18" alt="Pick another theme!" src="../../brush.svg"></button><div id="theme-choices" role="menu"></div></div><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" id="help-button" title="help">?</button><a id="settings-menu" href="../../settings.html" title="settings"><img width="18" height="18" alt="Change settings" src="../../wheel.svg"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Constant <a href="../index.html">lmdb_zero</a>::<wbr><a href="index.html">db</a>::<wbr><a class="constant" href="#">DUPFIXED</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../../src/lmdb_zero/dbi.rs.html#30-253" title="goto source code">[src]</a></span></h1><pre class="rust const"><code>pub const DUPFIXED: <a class="struct" href="struct.Flags.html" title="struct lmdb_zero::db::Flags">Flags</a>;</code></pre><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This flag may only be used in combination with <code>DUPSORT</code>. This
option tells the library that the data items for this database
are all the same size, which allows further optimizations in
storage and retrieval. When all data items are the same size,
the <code>get_multiple</code> and <code>next_multiple</code> cursor operations may be
used to retrieve multiple items at once.</p>
<h2 id="notes" class="section-header"><a href="#notes">Notes</a></h2>
<p>There are no runtime checks that values are actually the same
size; failing to uphold this constraint may result in
unpredictable behaviour.</p>
<h2 id="example" class="section-header"><a href="#example">Example</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use</span> <span class="ident">lmdb::Unaligned</span> <span class="kw">as</span> <span class="ident">U</span>;
<span class="kw">use</span> <span class="ident">lmdb::LmdbResultExt</span>;

<span class="kw">let</span> <span class="ident">db</span> <span class="op">=</span> <span class="ident">lmdb::Database::open</span>(
  <span class="kw-2">&amp;</span><span class="ident">env</span>, <span class="prelude-val">Some</span>(<span class="string">&quot;reversed&quot;</span>), <span class="kw-2">&amp;</span><span class="ident">lmdb::DatabaseOptions::new</span>(
    <span class="ident">lmdb::db::DUPSORT</span> <span class="op">|</span> <span class="ident">lmdb::db::DUPFIXED</span> <span class="op">|</span>
    <span class="ident">lmdb::db::INTEGERDUP</span> <span class="op">|</span> <span class="ident">lmdb::db::CREATE</span>))
  .<span class="ident">unwrap</span>();
<span class="kw">let</span> <span class="ident">txn</span> <span class="op">=</span> <span class="ident">lmdb::WriteTransaction::new</span>(<span class="kw-2">&amp;</span><span class="ident">env</span>).<span class="ident">unwrap</span>();
{
  <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">access</span> <span class="op">=</span> <span class="ident">txn</span>.<span class="ident">access</span>();
  <span class="kw">let</span> <span class="ident">f</span> <span class="op">=</span> <span class="ident">lmdb::put::Flags::empty</span>();
  <span class="comment">// Map strings to their constituent chars</span>
  <span class="kw">for</span> <span class="ident">s</span> <span class="kw">in</span> <span class="kw-2">&amp;</span>[<span class="string">&quot;foo&quot;</span>, <span class="string">&quot;bar&quot;</span>, <span class="string">&quot;xyzzy&quot;</span>] {
    <span class="kw">for</span> <span class="ident">c</span> <span class="kw">in</span> <span class="ident">s</span>.<span class="ident">chars</span>() {
      <span class="ident">access</span>.<span class="ident">put</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>, <span class="kw-2">*</span><span class="ident">s</span>, <span class="kw-2">&amp;</span><span class="ident">c</span>, <span class="ident">f</span>).<span class="ident">unwrap</span>();
    }
  }

  <span class="comment">// Read in all the chars of &quot;xyzzy&quot; in sorted order via</span>
  <span class="comment">// cursoring.</span>
  <span class="comment">// Note that we have to read `u32`s because `char`s are not</span>
  <span class="comment">// directly convertable from byte arrays.</span>
  <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">xyzzy</span>: <span class="ident">Vec</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">Vec::new</span>();
  <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">cursor</span> <span class="op">=</span> <span class="ident">txn</span>.<span class="ident">cursor</span>(<span class="kw-2">&amp;</span><span class="ident">db</span>).<span class="ident">unwrap</span>();
  <span class="ident">cursor</span>.<span class="ident">seek_k</span>::<span class="op">&lt;</span><span class="ident">str</span>,<span class="ident">U</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span><span class="op">&gt;</span>(<span class="kw-2">&amp;</span><span class="ident">access</span>, <span class="string">&quot;xyzzy&quot;</span>).<span class="ident">unwrap</span>();
  <span class="kw">loop</span> {
    <span class="kw">let</span> <span class="ident">chars</span> <span class="op">=</span> <span class="kw">if</span> <span class="ident">xyzzy</span>.<span class="ident">is_empty</span>() {
      <span class="comment">// First page.</span>
      <span class="comment">// Note that in this example we probably get everything</span>
      <span class="comment">// on the first page, but with more values we&#39;d need to</span>
      <span class="comment">// use `next_multiple` to get the rest.</span>
      <span class="ident">cursor</span>.<span class="ident">get_multiple</span>::<span class="op">&lt;</span>[<span class="ident">U</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span>]<span class="op">&gt;</span>(<span class="kw-2">&amp;</span><span class="ident">access</span>).<span class="ident">unwrap</span>()
    } <span class="kw">else</span> {
      <span class="comment">// .to_opt() to turn NOTFOUND into None</span>
      <span class="kw">match</span> <span class="ident">cursor</span>.<span class="ident">next_multiple</span>::<span class="op">&lt;</span>[<span class="ident">U</span><span class="op">&lt;</span><span class="ident">u32</span><span class="op">&gt;</span>]<span class="op">&gt;</span>(<span class="kw-2">&amp;</span><span class="ident">access</span>).<span class="ident">to_opt</span>() {
        <span class="comment">// Ok if there&#39;s still more for the current key</span>
        <span class="prelude-val">Ok</span>(<span class="prelude-val">Some</span>(<span class="ident">c</span>)) <span class="op">=</span><span class="op">&gt;</span> <span class="ident">c</span>,
        <span class="comment">// NOTFOUND error (=&gt; None) at end of key</span>
        <span class="prelude-val">Ok</span>(<span class="prelude-val">None</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="kw">break</span>,
        <span class="comment">// Handle other errors</span>
        <span class="prelude-val">Err</span>(<span class="ident">e</span>) <span class="op">=</span><span class="op">&gt;</span> <span class="macro">panic!</span>(<span class="string">&quot;LMDB error: {}&quot;</span>, <span class="ident">e</span>),
      }
    };
    <span class="kw">for</span> <span class="ident">ch</span> <span class="kw">in</span> <span class="ident">chars</span> {
      <span class="ident">xyzzy</span>.<span class="ident">push</span>(<span class="ident">ch</span>.<span class="ident">get</span>());
    }
  }
  <span class="comment">// Now we&#39;ve read in all the values in sorted order.</span>
  <span class="macro">assert_eq!</span>(<span class="kw-2">&amp;</span>[<span class="string">&#39;x&#39;</span> <span class="kw">as</span> <span class="ident">u32</span>, <span class="string">&#39;y&#39;</span> <span class="kw">as</span> <span class="ident">u32</span>, <span class="string">&#39;z&#39;</span> <span class="kw">as</span> <span class="ident">u32</span>],
             <span class="kw-2">&amp;</span><span class="ident">xyzzy</span>[..]);
}
<span class="ident">txn</span>.<span class="ident">commit</span>().<span class="ident">unwrap</span>();</code></pre></div>
</div></details></section><section id="search" class="content hidden"></section><div id="rustdoc-vars" data-root-path="../../" data-current-crate="lmdb_zero" data-search-index-js="../../search-index.js" data-search-js="../../search.js"></div>
    <script src="../../main.js"></script>
</body></html>